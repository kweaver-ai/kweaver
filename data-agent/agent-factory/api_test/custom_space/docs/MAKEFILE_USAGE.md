# Makefile ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

è¿™ä¸ªMakefileæä¾›äº†ä¸€å¥—å®Œæ•´çš„APIæµ‹è¯•å’ŒæŠ¥å‘Šç”Ÿæˆå·¥å…·ï¼Œä¸“é—¨ç”¨äºæµ‹è¯•ç©ºé—´ç›¸å…³çš„APIæ¥å£ã€‚

## å‰ç½®æ¡ä»¶

1. **æœåŠ¡è¿è¡Œ**ï¼šç¡®ä¿agent-factoryæœåŠ¡åœ¨`http://127.0.0.1:13020`ç«¯å£è¿è¡Œ
2. **Goç¯å¢ƒ**ï¼šéœ€è¦Goè¿è¡Œç¯å¢ƒæ¥æ‰§è¡Œæµ‹è¯•å·¥å…·
3. **æµ‹è¯•å·¥å…·**ï¼šç¡®ä¿`agent-go-common-pkg/tool/apitesttool`å¯ç”¨

## å¿«é€Ÿå¼€å§‹

```bash
# è¿›å…¥æµ‹è¯•ç›®å½•
cd api_test/custom_space

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
make health-check

# æ‰§è¡Œå¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èï¼‰
make dev-test
```

## å‘½ä»¤åˆ†ç±»

### ğŸ”§ æœåŠ¡ç®¡ç†

| å‘½ä»¤ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `make start-service` | å¯åŠ¨æœåŠ¡ | åœ¨åå°å¯åŠ¨agent-factoryæœåŠ¡ |
| `make stop-service` | åœæ­¢æœåŠ¡ | åœæ­¢æ‰€æœ‰agent-factoryè¿›ç¨‹ |
| `make health-check` | å¥åº·æ£€æŸ¥ | æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ |

### ğŸ§ª æµ‹è¯•æ‰§è¡Œ

| å‘½ä»¤ | åŠŸèƒ½ | æµ‹è¯•å†…å®¹ |
|------|------|----------|
| `make test-all` | æ‰§è¡Œæ‰€æœ‰æµ‹è¯• | è¿è¡Œæ‰€æœ‰æµ‹è¯•å¥—ä»¶ |
| `make test-advanced` | é«˜çº§åŠŸèƒ½æµ‹è¯• | åŠ¨æ€å˜é‡ã€å˜é‡æå–ã€é“¾å¼æµ‹è¯• |
| `make test-complete` | å®Œæ•´æµ‹è¯•å¥—ä»¶ | æ‰€æœ‰CRUDæ“ä½œå’Œè¾¹ç•Œæ¡ä»¶ |
| `make test-create` | åˆ›å»ºç©ºé—´æµ‹è¯• | ç©ºé—´åˆ›å»ºåŠŸèƒ½æµ‹è¯• |
| `make test-detail` | ç©ºé—´è¯¦æƒ…æµ‹è¯• | ç©ºé—´æŸ¥è¯¢åŠŸèƒ½æµ‹è¯• |
| `make test-update` | ç©ºé—´æ›´æ–°æµ‹è¯• | ç©ºé—´æ›´æ–°åŠŸèƒ½æµ‹è¯• |

### ğŸ“Š æŠ¥å‘Šç”Ÿæˆ

| å‘½ä»¤ | åŠŸèƒ½ | è¾“å‡ºä½ç½® |
|------|------|----------|
| `make report-all` | ç”Ÿæˆæ‰€æœ‰æŠ¥å‘Š | `./reports/` ç›®å½• |
| `make report-advanced` | é«˜çº§åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š | `./reports/advanced_features_report.html` |
| `make report-complete` | å®Œæ•´æµ‹è¯•å¥—ä»¶æŠ¥å‘Š | `./reports/complete_suite_report.html` |
| `make report-create` | åˆ›å»ºç©ºé—´æµ‹è¯•æŠ¥å‘Š | `./reports/create_test_report.html` |
| `make report-detail` | ç©ºé—´è¯¦æƒ…æµ‹è¯•æŠ¥å‘Š | `./reports/detail_test_report.html` |
| `make report-update` | ç©ºé—´æ›´æ–°æµ‹è¯•æŠ¥å‘Š | `./reports/update_test_report.html` |

### ğŸ› ï¸ å·¥å…·å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `make list-reports` | åˆ—å‡ºæŠ¥å‘Šæ–‡ä»¶ | æ˜¾ç¤ºæ‰€æœ‰ç”Ÿæˆçš„HTMLæŠ¥å‘Š |
| `make clean` | æ¸…ç†æŠ¥å‘Šæ–‡ä»¶ | åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„HTMLæŠ¥å‘Š |

### ğŸš€ ç»„åˆå‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | åŒ…å«æ­¥éª¤ |
|------|------|----------|
| `make quick-test` | å¿«é€Ÿæµ‹è¯• | å¥åº·æ£€æŸ¥ + é«˜çº§åŠŸèƒ½æµ‹è¯• |
| `make full-test` | å®Œæ•´æµç¨‹ | å¥åº·æ£€æŸ¥ + æ‰€æœ‰æµ‹è¯• + æ‰€æœ‰æŠ¥å‘Š |
| `make dev-test` | å¼€å‘è€…æµ‹è¯• | å¥åº·æ£€æŸ¥ + é«˜çº§åŠŸèƒ½æµ‹è¯• + æŠ¥å‘Šç”Ÿæˆ |

## ä½¿ç”¨åœºæ™¯

### ğŸ” æ—¥å¸¸å¼€å‘æµ‹è¯•
```bash
# å¼€å‘è¿‡ç¨‹ä¸­çš„å¿«é€ŸéªŒè¯
make dev-test
```

### ğŸ“‹ å®Œæ•´åŠŸèƒ½éªŒè¯
```bash
# æ‰§è¡Œæ‰€æœ‰æµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š
make full-test
```

### ğŸ› é—®é¢˜è°ƒè¯•
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
make health-check

# æ‰§è¡Œç‰¹å®šæµ‹è¯•
make test-create
make test-update
```

### ğŸ“ˆ æŠ¥å‘Šç”Ÿæˆ
```bash
# ç”Ÿæˆç‰¹å®šæŠ¥å‘Š
make report-advanced

# æŸ¥çœ‹æ‰€æœ‰æŠ¥å‘Š
make list-reports

# æ¸…ç†æ—§æŠ¥å‘Š
make clean
```

## è¾“å‡ºè¯´æ˜

### é¢œè‰²ç¼–ç 
- ğŸŸ¢ **ç»¿è‰²**ï¼šæˆåŠŸä¿¡æ¯ã€é€šè¿‡çš„æµ‹è¯•
- ğŸŸ¡ **é»„è‰²**ï¼šè¿›è¡Œä¸­çš„æ“ä½œã€è­¦å‘Šä¿¡æ¯
- ğŸ”´ **çº¢è‰²**ï¼šé”™è¯¯ä¿¡æ¯ã€å¤±è´¥çš„æµ‹è¯•

### æŠ¥å‘Šæ–‡ä»¶
æ‰€æœ‰HTMLæŠ¥å‘Šéƒ½ä¿å­˜åœ¨`./reports/`ç›®å½•ä¸‹ï¼ŒåŒ…å«ï¼š
- æµ‹è¯•ç»“æœç»Ÿè®¡
- è¯¦ç»†çš„è¯·æ±‚/å“åº”ä¿¡æ¯
- æ–­è¨€ç»“æœ
- æ‰§è¡Œæ—¶é—´ç»Ÿè®¡

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```makefile
TOOL_PATH = /Users/Zhuanz/Work/as/dip_ws/agent-go-common-pkg/tool/apitesttool
TEST_DIR = .
SERVICE_URL = http://127.0.0.1:13020
```

### è‡ªå®šä¹‰é…ç½®
å¦‚éœ€ä¿®æ”¹é…ç½®ï¼Œç¼–è¾‘Makefileä¸­çš„å˜é‡å®šä¹‰éƒ¨åˆ†ã€‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡æœªè¿è¡Œ**
   ```bash
   make health-check
   # å¦‚æœå¤±è´¥ï¼Œå¯åŠ¨æœåŠ¡
   make start-service
   ```

2. **æµ‹è¯•é…ç½®æ–‡ä»¶ä¸å­˜åœ¨**
   ```bash
   # ç¡®ä¿åœ¨æ­£ç¡®ç›®å½•ä¸‹æ‰§è¡Œ
   pwd  # åº”è¯¥åœ¨ api_test/custom_space ç›®å½•
   ls *.yaml  # æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
   ```

3. **æƒé™é—®é¢˜**
   ```bash
   # ç¡®ä¿æœ‰æ‰§è¡Œæƒé™
   chmod +x Makefile
   ```

4. **Goç¯å¢ƒé—®é¢˜**
   ```bash
   # æ£€æŸ¥Goç¯å¢ƒ
   go version
   ```

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹è¯¦ç»†è¾“å‡º**ï¼šæ‰€æœ‰å‘½ä»¤éƒ½ä¼šæ˜¾ç¤ºè¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹
2. **åˆ†æ­¥æ‰§è¡Œ**ï¼šå¯ä»¥å•ç‹¬æ‰§è¡Œæ¯ä¸ªæ­¥éª¤è¿›è¡Œè°ƒè¯•
3. **æ£€æŸ¥æŠ¥å‘Š**ï¼šHTMLæŠ¥å‘ŠåŒ…å«è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## æœ€ä½³å®è·µ

1. **å¼€å‘é˜¶æ®µ**ï¼šä½¿ç”¨`make dev-test`è¿›è¡Œå¿«é€ŸéªŒè¯
2. **æäº¤å‰**ï¼šä½¿ç”¨`make full-test`è¿›è¡Œå®Œæ•´æµ‹è¯•
3. **å®šæœŸæ¸…ç†**ï¼šä½¿ç”¨`make clean`æ¸…ç†æ—§æŠ¥å‘Š
4. **æœåŠ¡æ£€æŸ¥**ï¼šæµ‹è¯•å‰å…ˆæ‰§è¡Œ`make health-check`

## æ‰©å±•è¯´æ˜

### æ·»åŠ æ–°æµ‹è¯•
1. åˆ›å»ºæ–°çš„YAMLé…ç½®æ–‡ä»¶
2. åœ¨Makefileä¸­æ·»åŠ å¯¹åº”çš„æµ‹è¯•å‘½ä»¤
3. æ·»åŠ å¯¹åº”çš„æŠ¥å‘Šç”Ÿæˆå‘½ä»¤

### ä¿®æ”¹æµ‹è¯•å·¥å…·è·¯å¾„
ä¿®æ”¹Makefileä¸­çš„`TOOL_PATH`å˜é‡å³å¯ã€‚

### æ›´æ”¹æœåŠ¡åœ°å€
ä¿®æ”¹Makefileä¸­çš„`SERVICE_URL`å˜é‡å³å¯ã€‚ 